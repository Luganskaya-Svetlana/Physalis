{% extends "base.html" %}
{% load markdown_extras %}
{% load ziamath_filter %}
{% load abbr %}
{% load save_parameters %}
{% load static %}
{% load cache %}


{% block content %}
  <h1>{{title}}
    {% comment %} Для страниц с задачами по типам {% endcomment %}
    {% if previous_type %}
      <a class="lnk_btn no-print" href="/types/{{type_num|add:"-1"}}" title="Тип {{type_num|add:"-1"}}">«</a>
    {% endif %}
    {% if next_type %}
      <a class="lnk_btn no-print" href="/types/{{type_num|add:"+1"}}" title="Тип {{type_num|add:"+1"}}">»</a>
    {% endif %}
  </h1>

  <form method="get" class="no-print">
    {{ filter.form.as_p }}
    <input type="submit" />
  </form>

  {% if page_obj.paginator.num_pages != 1 %}
    <div class="center-flex"> <h3>Выберите страницу</h3> </div>
    <div class="center-flex mb10 mt-5"> 
      {% for page_number in page_obj.paginator.page_range %}
        <a
          href="?{% param_save page=page_number %}"
          class="page {% if page_number == page_obj.number %}current{% endif %}">
          {{page_number}}
        </a>
      {% endfor %}
    </div>
  {% endif %}

  {% for problem in page_obj %}
  <div class="rel">
    <div class="id-in-list">
      <a href="{{problem.get_absolute_url}}"><span class='id-number bold'>#{{problem.id}}</span></a>
      <span class="compl">Сложность {{problem.complexity}}/10</span>&nbsp;
      <span class="compl">Тип {{problem.type_ege.number}}</span>
      {% if problem.source %}<span class="compl">Источник: {{problem.source}}</span>{% endif %}
      <span class="compl no-solution">{% if not problem.solution %}Без решения{% endif %}</span>
    </div>
    <div class="problem">{{problem.text|abbr|ziamath_filter|markdown|safe}}</div>
  </div><hr class=mb20>
  {% empty %}
    <p>Ничего не нашлось {{":("}}</p>
    <p>Попробуйте другой фильтр.</p>
  {% endfor %}

  {% if page_obj.paginator.num_pages != 1 %}
    <div class="center-flex"> <h3>Выберите страницу</h3> </div>
    <div class="center-flex">
      {% for page_number in page_obj.paginator.page_range %}
        <a
          href="?{% param_save page=page_number %}"
          class="page {% if page_number == page_obj.number %}current{% endif %}">
          {{page_number}}
        </a>
      {% endfor %}
    </div>
  {% endif %}
{% endblock %}
