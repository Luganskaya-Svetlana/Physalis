{% extends "base.html" %}
{% load markdown_extras %}
{% load ziamath_filter %}
{% load abbr %}

{% block content %}
  <div class="card">
    <h1 class="card-title">Задача #{{problem.id}}
      {% if previous_problem %}
        <a class="lnk_btn no-print" href="/problems/{{problem.id|add:"-1"}}" title="#{{problem.id|add:"-1"}}">«</a>
      {% endif %}
      {% if next_problem %}
        <a class="lnk_btn no-print" href="/problems/{{problem.id|add:"+1"}}" title="#{{problem.id|add:"+1"}}">»</a>
      {% endif %}
    </h1>
    <div class="problem">{{problem.text|abbr|ziamath_filter|markdown|safe}}</div>
    {% if problem.solution%}<h2>Решение</h2><div class="solution">{{problem.solution|abbr|ziamath_filter|markdown|safe}}</div>{% endif %}
    {% if problem.answer%}<h2>Ответ </h2><div class="answer">{{problem.answer|ziamath_filter|markdown|safe}}</div>{% endif %}
    {% if problem.complexity%}<p><b>Сложность: </b>{{problem.complexity}}/10</p>{% endif %}
    {% if problem.source%}<p><b>Источник: </b><a href="/problems/?source={{problem.source.id}}">{{problem.source}}</a></p>{% endif %}
    {% if problem.category%}<p><b>Раздел: </b>{{problem.category}}</p>{% endif %}
    {% if problem.subcategory%}<p><b>Подраздел: </b>{{problem.subcategory}}</p>{% endif %}
    <p><b>Номер в ЕГЭ: </b>{{problem.type_ege}}</p>
    {% if problem.tags.all %}
    <div class='ta-left'>
      <a class=bold href='{% url 'tags:list'%}'>Тэги:</a>
      {% for tag in problem.tags.all %}
        <a class='tag' href={{tag.get_absolute_url}}>{{ tag.name }}</a>
      {% endfor %}
    </div>
    {% endif %}
    {% if request.user.is_staff and problem.variants.all %}
    <p>
      <b>Варианты:</b>
      {% for variant in problem.variants.all %}
        <a href="{{variant.get_absolute_url}}">#{{variant.id}}</a>
      {% endfor %}
    </p>
    {% endif %}
  </div>
{% endblock %}
